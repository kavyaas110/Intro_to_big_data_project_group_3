CREATE TABLE Person (nconst INTEGER PRIMARY KEY, primaryName VARCHAR(255), birthYear INTEGER, deathYear INTEGER);
CREATE TABLE Title (tconst INTEGER PRIMARY KEY, titleType VARCHAR(50) NOT NULL, primaryTitle VARCHAR(500) NOT NULL, originalTitle VARCHAR(500), isAdult BOOLEAN NOT NULL DEFAULT FALSE, startYear INTEGER, endYear INTEGER, runtimeMinutes INTEGER);
CREATE TABLE Genre (genreName VARCHAR(50) PRIMARY KEY);
CREATE TABLE Rating (tconst INTEGER PRIMARY KEY,averageRating DECIMAL(3,1) NOT NULL CHECK (averageRating >= 0 AND averageRating <= 10),numVotes INTEGER NOT NULL CHECK (numVotes >= 0),FOREIGN KEY (tconst) REFERENCES Title(tconst) ON DELETE CASCADE);
CREATE TABLE Has_Genre (tconst INTEGER NOT NULL,genreName VARCHAR(50) NOT NULL,PRIMARY KEY (tconst, genreName),FOREIGN KEY (tconst) REFERENCES Title(tconst) ON DELETE CASCADE,FOREIGN KEY (genreName) REFERENCES Genre(genreName) ON DELETE CASCADE);
CREATE TABLE Acts_In (tconst INTEGER NOT NULL,nconst INTEGER NOT NULL,PRIMARY KEY (tconst, nconst),FOREIGN KEY (tconst) REFERENCES Title(tconst) ON DELETE CASCADE,FOREIGN KEY (nconst) REFERENCES Person(nconst) ON DELETE CASCADE);
CREATE TABLE Directs (tconst INTEGER NOT NULL,nconst INTEGER NOT NULL,PRIMARY KEY (tconst, nconst),FOREIGN KEY (tconst) REFERENCES Title(tconst) ON DELETE CASCADE,FOREIGN KEY (nconst) REFERENCES Person(nconst) ON DELETE CASCADE);
CREATE TABLE Writes (tconst INTEGER NOT NULL,nconst INTEGER NOT NULL,PRIMARY KEY (tconst, nconst),FOREIGN KEY (tconst) REFERENCES Title(tconst) ON DELETE CASCADE,FOREIGN KEY (nconst) REFERENCES Person(nconst) ON DELETE CASCADE);
CREATE TABLE Produces (tconst INTEGER NOT NULL,nconst INTEGER NOT NULL,PRIMARY KEY (tconst, nconst),FOREIGN KEY (tconst) REFERENCES Title(tconst) ON DELETE CASCADE,FOREIGN KEY (nconst) REFERENCES Person(nconst) ON DELETE CASCADE);